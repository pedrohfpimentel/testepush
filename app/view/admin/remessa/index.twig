{% extends "admin/layout.twig" %}
{% block html_title %}Produtos - Administração - {{ parent() }}{% endblock %}
{% set nav_active = 'products' %}
{% block breadcrumbs %}



{#<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="/resources/demos/style.css">
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <script>
  $( function() {
    var availableTags = ["{{ base_url() }}/admin/products/add"];
    $( 'products.name' ).autocomplete({
      source: availableTags
    });
  } );
  </script>
</head>#}

<ol class="breadcrumb">
  <li><a href="{{ base_url() }}/admin">Início</a></li>

  <li class="active">Adicionar</li>
   <li>{{ products.name }}</li>
</ol>
{% endblock %}

{% block content %}
<div class="row">
  <div class="col-sm-7">
    <div class=" card">
      <div class="card-header" data-background-color="blue">
        <div class="row">
          <div class="col-xs-12">
            <h3>Entrada de Estoque</h3>
          </div>
        </div>
      </div>
      <div class="card-content">
        <div class="row">
          <div class="col-md-12">
            <form role="form" data-toggle="validator" action="{{ base_url() }}/admin/remessa/add" method="POST">
              <p>Tela para cadastrar entradas no estoque.</p>
              <input type="hidden" name="id" value="{{ products.id }}">
              <div class="row">
                 <div class="col-sm-12">
                   <div class="form-group">
                     <label for="name">Tipo de Entrada:</label>
                     <div class="ui-widget">
                       <select class="form-control">
                         {% for remessaType in remessaTypes %}
                            <option value="{{ id_remessa_type.id }}">{{ remessaType.name }}</option>
                         {% endfor %}
                       </select>
                     </div>
                   </div>
                 </div>
               </div>
              <div class="row">
                <div class="col-sm-12">
                  <div class="form-group">
                  <label for="name">Produto:</label>
                    <div class="ui-widget" >
                      <input class="form-control" id="input_id_product" type="text" name="id_product" placeholder="Nome" autofocus required onblur="validarDados('input_id_product', document.getElementById('input_id_product').value);">
                      <div id="campo_login"> </div>
                    </div>
                  </div>
                </div>
               </div>
               <div class="row">
                 <div class=" col-sm-2 form-group">
                   <label for="quantity">Quantidade</label>
                   <input type="number" class="form-control" id="quantity" name="quantity" placeholder="">
                 </div>

                 <div class=" col-sm-4 form-group">
                   <label for="cost">Custo</label>
                   
                   <input type="money" class="form-control" id="cost" name="cost" placeholder="R$ 00,00"/>
                   
                 </div>

                 <div class=" col-sm-4 form-group">
                   <label for="quantity">Data de Entrada</label>
                   <input type="date" class="form-control" id="input_date" name="date" placeholder="">
                 </div>
               </div>
               <button type="submit" onclick="soma()"  value="button" class="btn btn-primary">Adicionar</button>
            </form>
            <p><a href="http://afarkas.github.io/webshim/demos/demos/cfgs/input-number.html" target="_blank"></a>
</p>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

{% endblock %}
{% block javascripts %}
{#mascara monetaria#}
<script type="text/javascript">
                  $(function() {
                    $('[type=money]').maskMoney({
                      thousands: '.',
                      decimal: ','
                    });
                  });
                </script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-maskmoney/3.0.2/jquery.maskMoney.min.js" type="text/javascript"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/1000hz-bootstrap-validator/0.11.9/validator.min.js"></script>

<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />

<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
       var availableTags = [];

       //autcomplete
       {% for product in products %}
        availableTags.push("{{ product.id }} - {{ product.name }}");
       {% endfor %}

       $( "#input_id_product" ).autocomplete({
         source: availableTags
      });
    });
</script>




<script type="text/javascript" src="ajax/funcs.js"></script>

<script >// Variável que receberá o objeto XMLHttpRequest
var req;
 
function validarDados(campo, valor) {
 
// Verificar o Browser
// Firefox, Google Chrome, Safari e outros
if(window.XMLHttpRequest) {
   req = new XMLHttpRequest();
}
// Internet Explorer
else if(window.ActiveXObject) {
   req = new ActiveXObject("Microsoft.XMLHTTP");
}
 
// Aqui vai o valor e o nome do campo que pediu a requisição.
var url = "ajax/validacao.php?campo="+campo+"&valor="+valor;
 
// Chamada do método open para processar a requisição
req.open("Get", url, true);
 
// Quando o objeto recebe o retorno, chamamos a seguinte função;
req.onreadystatechange = function() {
 
  // Exibe a mensagem "Verificando" enquanto carrega
  if(req.readyState == 1) {
    document.getElementById('campo_' + campo + '').innerHTML = '<font color="gray">Verificando...</font>';
  }
 
  // Verifica se o Ajax realizou todas as operações corretamente (essencial)
  if(req.readyState == 4 && req.status == 200) {
  // Resposta retornada pelo validacao.php
  var resposta = req.responseText;
 
  // Abaixo colocamos a resposta na div do campo que fez a requisição
  document.getElementById('campo_'+ campo +'').innerHTML = resposta;
  }
 
}
 
req.send(null);
 
}
</script>

<script>
// Campo que fz requisição
$campo = $_GET['campo'];
// Valor do campo que fez a requisição
$valor = $_GET['valor'];
 
// Verificando o campo login
if ($campo == "input_id_product") {
 
  if ($valor == "") {
    echo "Preencha o campo com o produto";
  } elseif (strlen($valor) == 0) {
    echo "produto inválido";
  }
 
}
 
</script>


{% endblock %}
